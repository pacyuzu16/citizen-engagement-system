{"ast":null,"code":"var _jsxFileName = \"/home/pacyusi/Desktop/Y2/citizen-engagement-system/client/src/pages/Dashboard.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, ListGroup, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [complaints, setComplaints] = useState([]);\n  useEffect(() => {\n    const fetchComplaints = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5000/api/complaints/user/complaints', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setComplaints(response.data);\n      } catch (err) {\n        console.error('Error fetching complaints:', err);\n        alert('Failed to fetch complaints');\n      }\n    };\n    fetchComplaints();\n  }, []);\n  const handleCancelComplaint = async complaintId => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`http://localhost:5000/api/complaints/${complaintId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setComplaints(prev => prev.filter(c => c._id !== complaintId));\n      alert('Complaint canceled');\n    } catch (err) {\n      console.error('Error canceling complaint:', err);\n      alert('Failed to cancel complaint');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-primary\",\n      children: \"My Complaints Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), complaints.length > 0 ? /*#__PURE__*/_jsxDEV(ListGroup, {\n      className: \"mt-3\",\n      children: complaints.map(complaint => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: complaint.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 15\n        }, this), \" (Ticket: \", complaint.ticketId, \")\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 80\n        }, this), \"Status: \", complaint.status, \" | Response: \", complaint.response || 'None', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 84\n        }, this), \"Category: \", complaint.category, \" | Agency: \", complaint.agency, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 74\n        }, this), \"Description: \", complaint.description, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 51\n        }, this), \"Submitted: \", new Date(complaint.createdAt).toLocaleString(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 74\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          size: \"sm\",\n          className: \"mt-2\",\n          onClick: () => handleCancelComplaint(complaint._id),\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faTimes,\n            className: \"me-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this), \" Cancel Complaint\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this)]\n      }, complaint._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No complaints found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"Q0n/ndeodrSyMT6TnAqmg/BjuLM=\");\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["useState","useEffect","axios","Container","ListGroup","Button","FontAwesomeIcon","faTimes","jsxDEV","_jsxDEV","Dashboard","_s","complaints","setComplaints","fetchComplaints","token","localStorage","getItem","response","get","headers","Authorization","data","err","console","error","alert","handleCancelComplaint","complaintId","delete","prev","filter","c","_id","children","className","fileName","_jsxFileName","lineNumber","columnNumber","length","map","complaint","Item","title","ticketId","status","category","agency","description","Date","createdAt","toLocaleString","variant","size","onClick","icon","_c","$RefreshReg$"],"sources":["/home/pacyusi/Desktop/Y2/citizen-engagement-system/client/src/pages/Dashboard.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Container, ListGroup, Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\n\nfunction Dashboard() {\n  const [complaints, setComplaints] = useState([]);\n\n  useEffect(() => {\n    const fetchComplaints = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:5000/api/complaints/user/complaints', {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        setComplaints(response.data);\n      } catch (err) {\n        console.error('Error fetching complaints:', err);\n        alert('Failed to fetch complaints');\n      }\n    };\n\n    fetchComplaints();\n  }, []);\n\n  const handleCancelComplaint = async (complaintId) => {\n    try {\n      const token = localStorage.getItem('token');\n      await axios.delete(`http://localhost:5000/api/complaints/${complaintId}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setComplaints(prev => prev.filter(c => c._id !== complaintId));\n      alert('Complaint canceled');\n    } catch (err) {\n      console.error('Error canceling complaint:', err);\n      alert('Failed to cancel complaint');\n    }\n  };\n\n  return (\n    <Container>\n      <h2 className=\"text-primary\">My Complaints Dashboard</h2>\n      {complaints.length > 0 ? (\n        <ListGroup className=\"mt-3\">\n          {complaints.map(complaint => (\n            <ListGroup.Item key={complaint._id}>\n              <strong>{complaint.title}</strong> (Ticket: {complaint.ticketId})<br />\n              Status: {complaint.status} | Response: {complaint.response || 'None'}<br />\n              Category: {complaint.category} | Agency: {complaint.agency}<br />\n              Description: {complaint.description}<br />\n              Submitted: {new Date(complaint.createdAt).toLocaleString()}<br />\n              <Button\n                variant=\"danger\"\n                size=\"sm\"\n                className=\"mt-2\"\n                onClick={() => handleCancelComplaint(complaint._id)}\n              >\n                <FontAwesomeIcon icon={faTimes} className=\"me-2\" /> Cancel Complaint\n              </Button>\n            </ListGroup.Item>\n          ))}\n        </ListGroup>\n      ) : (\n        <p>No complaints found.</p>\n      )}\n    </Container>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}